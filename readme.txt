# -*- encoding=utf8 -*-
__author__ = "atyun-clq-Android"

from airtest.core.api import *
import datetime
from poco.drivers.android.uiautomation import AndroidUiautomationPoco
poco = AndroidUiautomationPoco(use_airtest_input=True, screenshot_each_action=False)
auto_setup(__file__)
weight = poco.get_screen_size()[0]
high = poco.get_screen_size()[1]
swipetime=weight*0.0000428669

'''
以下为微信登录
'''
i = 1
while(i < 3):
    poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View")[3].click([0.5,0.5],1)
    poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View")[5].click([0.5,0.5],1)
    poco(text='我的').click([0.5,0.5],1)
    poco(text='我的设置').click([0.5,0.5],1)
    poco(text='退出登录').click([0.5,0.5],1)
    poco(text='退出登录').click([0.5,0.5],1)
    i = i + 1
    
'''
以下为用户名登录：TST
'''
poco(textMatches="用户名密码登录[\s].*$").click()
poco(text='云深测试prod').click([0.5,0.5],1)
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View")[2].child("android.view.View").child("android.view.View").child("android.view.View")[0].click([0.5,0.5],1)
poco(text="用户名").click([0.5,0.5],1)
text("TST")
poco(text="密码").click([0.5,0.5],1)
text("atyun728")
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View")[3].click([0.5,0.5],1)
poco(text="登录").click([0.5,0.5],1)

'''
我的界面：
以下为修改病人用户名，原始：TST，修改为：Test2020
'''
poco(text="我的").click([0.5,0.5],1)
poco(text="我的设置").click([0.5,0.5],1)
poco(text="个人信息").click([0.5,0.5],1)
poco(textMatches="用户名[\s].*$").click()
poco(text="TST").click([0.5,0.5],1)
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View").click([0.5,0.5],1)
text("Test2020")
poco(text="保存").click([0.5,0.5],1)
poco(textMatches="您的用户名已更换为[\s]Test2020[\s]确定").click([0.5,0.9],1)
keyevent("BACK")
sleep(1.0)
keyevent("BACK")
sleep(1.0)
assert_equal(poco(textMatches="Test2020[\s]病友").exists(), True, "病友用户名修改成功。")
poco(text="我的设置").click([0.5,0.5],1)
poco(text="个人信息").click([0.5,0.5],1)
poco(textMatches="用户名[\s].*$").click()
poco(text="Test2020").click([0.5,0.5],1)
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View").click([0.5,0.5],1)
text("TST")
poco(text="保存").click([0.5,0.5],1)
assert_equal(poco(textMatches="您的用户名已更换为[\s]TST[\s]确定").exists(),True,"用户名更换成功")
keyevent("BACK")
sleep(1.0)
keyevent("BACK")
sleep(1.0)
'''
我的界面：
以下为修改性别
'''
poco(textMatches="性别[\s]女").click([0.5,0.5],1)
poco(text="男").click([0.5,0.5],1)
keyevent("BACK")
sleep(1.0)
keyevent("BACK")
sleep(1.0)
poco(textMatches="TST[\s]病友").click([0.5,0.4],1)
assert_equal(poco(textMatches="性别[\s]男[\s]手机号[\s].*[\s]微信").exists(),True,"性别男存在")
keyevent("BACK")
sleep(1.0)
poco(text="我的设置").click([0.5,0.5],1)
poco(text="个人信息").click([0.5,0.5],1)
poco(textMatches="性别[\s]男").click([0.5,0.5],1)
poco(text="女").click([0.5,0.5],1)
keyevent("BACK")
sleep(1.0)
keyevent("BACK")
sleep(1.0)
'''
我的界面：
以下为隐私政策页面
'''
poco(text="我的设置").click([0.5,0.5],1)
poco(text="隐私政策").click([0.5,0.5],1)
assert_equal(poco(text="隐私政策").exists(), True, "隐私政策页面进入正常。")
keyevent("BACK")
sleep(1.0)
'''
我的界面：
以下为服务协议页面
'''
poco(text="服务协议").click([0.5,0.5],1)
assert_equal(poco(text="服务协议").exists(), True, "服务协议页面进入正常。")
keyevent("BACK")
sleep(1.0)
'''
我的界面：
以下为常见问题页面
'''
poco(text="常见问题").click([0.5,0.5],1)
assert_equal(poco(text="常见问题").exists(), True, "常见问题页面进入正常。")
keyevent("BACK")
sleep(1.0)
'''
我的界面：
以下为关于我们页面
'''
poco(text="关于我们").click([0.5,0.5],1)
assert_equal(poco(text="关于我们").exists(), True, "关于我们页面进入正常。")
keyevent("BACK")
sleep(1.0)
keyevent("BACK")
sleep(1.0)

'''
以下为心理量表
'''

poco(text="心理量表").click([0.5,0.5],1)
poco(text="最近一周抑郁水平测试CES-D").click([0.5,0.5],1)
poco(text="开始测量").click([0.5,0.5],1)

i = 1
while(i < 21):
    poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[4].child("android.view.View").child("android.view.View")[1].child("android.widget.RadioButton")[1].click([0.5,0.5],1)
    i = i + 1

poco(text='提交').click([0.5,0.5],1)

assert_equal(poco(textMatches="20分[\s]16～24分是中等水平的抑郁。这个测验不是用来诊断抑郁症的，它的目的是告诉你，你现在的抑郁水平。").exists(), True, "我的量表结果存在")
keyevent("BACK")
poco(text='历史').click([0.5,0.5],1)
poco(textMatches="最近一周抑郁水平测试CES-D[\s].*$").click([0.5,0.5],1)
poco(text='查看详情').click([0.5,0.5],1)
assert_equal(poco(textMatches="20分[\s]16～24分是中等水平的抑郁。这个测验不是用来诊断抑郁症的，它的目的是告诉你，你现在的抑郁水平。").exists(), True, "我的量表结果存在")
keyevent("BACK")
poco(text='重新测试').click([0.5,0.5],1)
poco(text='开始测量').click([0.5,0.5],1)
i = 1
while(i < 21):
    poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[4].child("android.view.View").child("android.view.View")[1].child("android.widget.RadioButton")[1].click([0.5,0.5],1)
    i = i + 1

poco(text='提交').click([0.5,0.5],1)
assert_equal(poco(textMatches="20分[\s]16～24分是中等水平的抑郁。这个测验不是用来诊断抑郁症的，它的目的是告诉你，你现在的抑郁水平。").exists(), True, "我的量表结果存在")
keyevent("BACK")
poco(text='查看详情').click([0.5,0.5],1)
assert_equal(poco(textMatches="20分[\s]16～24分是中等水平的抑郁。这个测验不是用来诊断抑郁症的，它的目的是告诉你，你现在的抑郁水平。").exists(), True, "我的量表结果存在")
keyevent("BACK")
keyevent("BACK")
keyevent("BACK")
poco(text='你有强迫症吗').click([0.5,0.5],1)
poco(text='开始测量').click([0.5,0.5],1)
i = 1
while(i < 31):
    poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[4].child("android.view.View").child("android.view.View")[1].child("android.widget.RadioButton")[0].click([0.5,0.5],1)
    i = i + 1

poco(text='提交').click([0.5,0.5],1)
assert_exists(Template(r"tpl1585733545105.png", record_pos=(0.018, -0.19), resolution=(720, 1520)), "本次测量选项存在")
keyevent("BACK")
poco(text='历史').click([0.5,0.5],1)
poco(textMatches="你有强迫症吗[\s].*$").click([0.5,0.5],1)
poco(text='查看详情').click([0.5,0.5],1)
assert_exists(Template(r"tpl1585733545105.png", record_pos=(0.018, -0.19), resolution=(720, 1520)), "本次测量选项存在")
keyevent("BACK")
poco(text='重新测试').click([0.5,0.5],1)
poco(text='开始测量').click([0.5,0.5],1)
i = 1
while(i < 31):
    poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[4].child("android.view.View").child("android.view.View")[1].child("android.widget.RadioButton")[0].click([0.5,0.5],1)
    i = i + 1

poco(text='提交').click([0.5,0.5],1)
assert_exists(Template(r"tpl1585733545105.png", record_pos=(0.018, -0.19), resolution=(720, 1520)), "本次测量选项存在")
keyevent("BACK")
poco(text='查看详情').click([0.5,0.5],1)
assert_exists(Template(r"tpl1585733545105.png", record_pos=(0.018, -0.19), resolution=(720, 1520)), "本次测量选项存在")
keyevent("BACK")
keyevent("BACK")
keyevent("BACK")
keyevent("BACK")
'''
以下为亲属关联
'''
poco(text='亲属关联').click([0.5,0.5],1)
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[0].child("android.widget.Button")[1].click()
sleep(1.0)
poco(text='输入真实姓名').click()
text('测试姓名')
poco(text="请输入与用户关系").click([0.5,0.5],1)
text('测试关系')
poco(text='请输入手机号码').click([0.5,0.5],1)
text('18876767878')
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].click([0.5,0.5],1)
poco(text='生成邀请码').click([0.5,0.5],1)
poco(text='复制邀请码').click([0.5,0.5],1)
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[2].click([0.5,0.5],1)
sleep(1.0)
poco(text='文件传输助手').click()
poco(text='分享').click([0.5,0.5],1)
poco(text='返回微之显').click([0.5,0.5],1)
poco(text='分享二维码').click([0.5,0.5],1)
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].click([0.5,0.5],1)
poco(text='文件传输助手').click()
poco(text='分享').click([0.5,0.5],1)
poco(text='返回微之显').click([0.5,0.5],1)
keyevent("BACK")
keyevent("BACK")
sleep(1.0)
swipe([508,244],[276,251],duration=0.5)
poco(text='删除').click([0.5,0.5],1)
poco(text='取消').click([0.5,0.5],1)
assert_equal(poco(textMatches="测试姓名[\s]测试关系[\s]待添加").exists(), True, "增加的亲属关系存在")
swipe([508,244],[276,251],duration=0.5)
poco(text='删除').click([0.5,0.5],1)
poco(text='确认').click([0.5,0.5],1)
assert_equal(poco(name='android.widget.ImageView').exists(), True, "暂无内容存在")
keyevent("BACK")
'''
以下为添加医生
'''
poco(text='我的医生').click([0.5,0.5],1)
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[0].child("android.view.View")[1].click()
sleep(1.0)
poco(textMatches="未确认[\s].*$").click()
sleep(1.0)
poco(text='医生的姓名/手机号').click()
text("prod升")
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[2].click([0.5,0.5],1)
poco(textMatches='prod升[\s].*$').click()
poco(text='确认添加').click([0.5,0.5],1)
keyevent("BACK")
keyevent("BACK")
poco(textMatches="未确认[\s].*$").click([0.5,0.5],1)
assert_equal(poco(textMatches="肥西县人民医院[\s]prod升[\s]肥西县人民医院 儿内科").exists(), True, "prod升存在")
keyevent("BACK")
poco(text='我的设置').click([0.5,0.5],1)
poco(text='退出登录').click([0.5,0.5],1)
poco(text='退出登录').click([0.5,0.5],1)
poco(text='TST').click([0.5,0.5],1)
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View")[2].child("android.view.View").child("android.view.View").child("android.view.View")[0].click([0.5,0.5],1)
poco(text='用户名').click([0.5,0.5],1)
text('TESTPROD')
poco(text='密码').click([0.5,0.5],1)
text('atyun728')
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View")[3].click([0.5,0.5],1)
poco(text='登录').click([0.5,0.5],1)
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[0].child("android.view.View").child("android.view.View")[1].click([0.5,0.5],1)
poco(textMatches="病人消息[\s].*$").click([0.5,0.5],1)
poco(text="拒绝").click([0.5,0.5],1)
keyevent("BACK")
keyevent("BACK")
poco(text='我的').click([0.5,0.5],1)
poco(text='我的设置').click([0.5,0.5],1)
poco(text='退出登录').click([0.5,0.5],1)
poco(text='退出登录').click([0.5,0.5],1)
poco(text='TESTPROD').click([0.5,0.5],1)
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View")[2].child("android.view.View").child("android.view.View").child("android.view.View")[0].click([0.5,0.5],1)
poco(text='用户名').click([0.5,0.5],1)
text('TST')
poco(text='密码').click([0.5,0.5],1)
text('atyun728')
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View")[3].click([0.5,0.5],1)
poco(text='登录').click([0.5,0.5],1)
poco(text='我的').click([0.5,0.5],1)
poco(text='我的医生').click([0.5,0.5],1)
poco(textMatches="未确认[\s].*$").click([0.5,0.5],1)
assert_equal(poco(name='android.widget.ImageView').exists(), True, "暂无内容存在")
keyevent("BACK")
'''
以下是联系医生
'''
poco(text='我的医生').click([0.5,0.5],1)
poco(textMatches='肥西县人民医院[\s].*[\s].*$').click()
sleep(1.0)
poco(text='联系TA').click([0.5,0.5],1)
poco(name="android.widget.EditText").click([0.5,0.5],1)
text("预发送信息")
poco(text="发送").click([0.5,0.5],1)
poco(name="android.widget.EditText").click([0.5,0.5],1)
sendtime = datetime.datetime.now()
sendmessage = sendtime.strftime('%Y-%m-%d-%H-%M-%S')
text(sendmessage)
poco(text="发送").click([0.5,0.5],1)
assert_equal(poco(text=sendmessage).exists(), True, "病人端联系医生消息发送正常。")
sleep(1.0)
keyevent("BACK")
sleep(1.0)
keyevent("BACK")
sleep(1.0)
keyevent("BACK")
sleep(1.0)
poco(text="我的").click([0.5,0.5],1)
poco(text="我的设置").click([0.5,0.5],1)
poco(text="退出登录").click([0.5,0.5],1)
poco(text="退出登录").click([0.5,0.5],1)
poco(text="TST").click([0.5,0.5],1)
sleep(1.0)
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View")[2].child("android.view.View").child("android.view.View").child("android.view.View")[0].click([0.5,0.5],1)
text("prod")
poco(text="密码").click([0.5,0.5],1)
text("atyun728")
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View")[3].click([0.5,0.5],1)
poco(text="登录").click([0.5,0.5],1)
poco(text="我的").wait_for_appearance(timeout=20)
poco(name="android.view.View")[3].click([0.5,0.5],1)
poco(textMatches="对话[\s].*$").click([0.5,0.5],1)
poco(text="TST").click([0.5,0.5],1)
assert_equal(poco(text=sendmessage).exists(), True, "医生端消息接收正常。")
keyevent("BACK")
keyevent("BACK")
'''
以下为添加病历
'''
poco(text='我的').click([0.5,0.5],1)
poco(text='我的设置').click([0.5,0.5],1)
poco(text='退出登录').click([0.5,0.5],1)
poco(text='退出登录').click([0.5,0.5],1)
poco(text="prod").click([0.5,0.5],1)
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View")[2].child("android.view.View").child("android.view.View").child("android.view.View")[0].click([0.5,0.5],1)
text("TST")
poco(text="密码").click([0.5,0.5],1)
text("atyun728")
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View")[3].click([0.5,0.5],1)
poco(text="登录").click([0.5,0.5],1)
poco(text="报告").click([0.5,0.5],1)
poco("android.widget.Button").click()
sleep(1.0)
poco(text='低促性腺激素性性腺功能减退').click([0.5,0.5],1)
poco(text='低促常规复诊').click([0.5,0.5],1)
poco(text='下一步').click([0.5,0.5],1)
poco(textMatches="就诊时间[\s].*$").click([0.5,0.5],1)
poco(text='确定').click([0.5,0.5],1)
poco(textMatches="医院名称[\s].*$").click([0.5,0.5],1)
poco(text='搜索').click([0.5,0.5],1)
text('肥西县人民医院')
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[2].click([0.5,0.5],1)
poco(text='肥西县人民医院',name='android.view.View').click()
sleep(1.0)
poco(textMatches="所属科室[\s].*$").click([0.5,0.5],1)
poco(text='确定').click([0.5,0.5],1)
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View").child("android.view.View")[6].child("android.view.View")[1].click([0.5,0.5],1)
poco(textMatches="医生自动化[\s].*$").click([0.5,0.5],1)
poco(text='请输入').click([0.5,0.5],1)
text('自动测试')
keyevent("BACK")
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[2].click()
sleep(1.0)
assert_equal(poco(textMatches="低促性腺激素性性腺功能减退[\s].*[\s].*[\s].*$").exists(),True,"低促性腺激素性性腺功能减退存在")
'''
以下为添加我的医嘱
'''
poco(textMatches="低促性腺激素性性腺功能减退[\s].*[\s].*[\s].*$").click()
poco(textMatches='常规复诊[\s].*$').click()
poco(text='添加新的检查结果').click()
poco(name="android.widget.SeekBar")[2].swipe([0.5,-3*swipetime],[0.5,5*swipetime],duration=0.5)
poco(text='确定').click()
poco(text='我的医嘱').click()
poco(textMatches='日期[\s]请选择医嘱日期').click()
poco(name="android.widget.SeekBar")[2].swipe([0.5,-3*swipetime],[0.5,5*swipetime],duration=0.5)
poco(text='确定').click()
poco(textMatches='治疗方法[\s]请选择治疗方法').click()
poco(text='确定').click()
poco(textMatches='药物[\s]请选择药物').click()
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View")[0].click()
text("长秀霖")
poco(text='搜索').click()
poco(textMatches='长秀霖[\s].*$').click()
poco(text='请输入剂量').click()
text('5')
poco(text='请输入饮食信息',name='android.view.View').click()
text('清淡')
poco(text='请输入运动信息',name='android.view.View').click()
text('跑步')
poco.swipe([500/high,500/weight],[500/high,200/weight],duration=0.5)
sleep(1.0)
poco(text="请选择复诊计划",name="android.view.View").click([0.5,0.5],1)
poco(text='确定').click()
poco(text="请输入备注").click()
text('测试')
poco.swipe([500/high,500/weight],[500/high,200/weight],duration=0.5)
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View").child("android.view.View")[4].child("android.view.View").child("android.view.View").child("android.view.View").click()
sleep(1.0)
poco(text='从相册选择').click()
poco("显示根目录").click()
poco("android.widget.FrameLayout").offspring("com.android.documentsui:id/roots_list").child("android.widget.LinearLayout")[3].offspring("android:id/icon")[0].click()
touch(Template(r"tpl1586934822099.png", record_pos=(0.239, 0.228), resolution=(720, 1520)))
touch(Template(r"tpl1586934831756.png", record_pos=(0.132, 0.911), resolution=(720, 1520)))
poco(text='添加').click()
poco(text='我的医嘱').click()
assert_equal(poco(textMatches='日期[\s].*$').exists(),True,"日期存在")
assert_equal(poco(textMatches='治疗方法[\s]泵治疗').exists(),True,"泵治疗存在")
assert_equal(poco(textMatches='药物[\s]长秀霖').exists(),True,"长秀霖存在")
assert_equal(poco(text='5',name='android.widget.EditText').exists(),True,"剂量为5存在")
assert_equal(poco(textMatches='清淡[\s].*$').exists(),True,"清淡存在")
assert_equal(poco(textMatches='跑步[\s].*$').exists(),True,"跑步存在")
poco.swipe([500/high,500/weight],[500/high,200/weight],duration=0.5)
assert_equal(poco(textMatches='复诊计划[\s].*$').exists(),True,"复诊计划时间存在")
assert_equal(poco(textMatches='测试[\s].*$').exists(),True,"备注中的测试存在")
keyevent('BACK')
'''
以下为更改我的医嘱
'''
poco(text='我的医嘱').click()
poco(textMatches='日期[\s].*$').click()
poco(name="android.widget.SeekBar")[2].swipe([0.5,-3*swipetime],[0.5,5*swipetime],duration=0.5)
poco(text='确定').click()
poco(textMatches='治疗方法[\s]泵治疗').click()
poco(name="android.widget.SeekBar").swipe([0.5,-3*swipetime],[0.5,5*swipetime],duration=0.5)
poco(text='确定').click()
poco(textMatches='药物[\s]长秀霖').click()
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View")[0].click()
text("万苏林")
poco(text='搜索').click()
poco(textMatches='万苏林[\s].*$').click()
poco(text='5').click()
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[0].child("android.view.View")[1].child("android.view.View").child("android.view.View")[3].child("android.view.View").click()
text('8')
poco(textMatches='清淡[\s].*$').click()
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[0].child("android.view.View")[1].child("android.view.View").child("android.view.View")[5].child("android.view.View").click()
text('少吃')
poco(textMatches='跑步[\s].*$').click()
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[0].child("android.view.View")[1].child("android.view.View").child("android.view.View")[6].child("android.view.View").click()
text('慢跑')
poco.swipe([500/high,500/weight],[500/high,200/weight],duration=0.5)
poco(text="删除").click()
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View").child("android.view.View")[5].child("android.view.View").child("android.view.View").child("android.view.View")[0].child("android.view.View").click()
poco.swipe([500/high,500/weight],[500/high,200/weight],duration=0.5)
poco(text='保存').click()
poco(text='我的医嘱').click()
assert_equal(poco(textMatches='日期[\s].*$').exists(),True,"日期存在")
assert_equal(poco(textMatches='治疗方法[\s]双促治疗').exists(),True,"双促治疗存在")
assert_equal(poco(textMatches='药物[\s]万苏林').exists(),True,"万苏林存在")
assert_equal(poco(text='8',name='android.widget.EditText').exists(),True,"计量为8存在")
assert_equal(poco(textMatches='少吃[\s].*$').exists(),True,"少吃存在")
assert_equal(poco(textMatches='慢跑[\s].*$').exists(),True,"慢跑存在")
keyevent("BACK")
keyevent("BACK")
keyevent("BACK")
swipe([595,406],[251,399],duration=0.5)
poco(text='删除').click([0.5,0.5],1)
poco(text='取消').click([0.5,0.5],1)
assert_equal(poco(textMatches="低促性腺激素性性腺功能减退[\s].*[\s].*[\s].*$").exists(),True,"低促性腺激素性性腺功能减退存在")
swipe([595,406],[251,399],duration=0.5)
poco(text='删除').click([0.5,0.5],1)
poco(text='确认').click([0.5,0.5],1)
assert_equal(poco(name='android.widget.ImageView').exists(), True, "暂无内容存在")
'''
以下为添加既往病史
'''
poco(textMatches='既往病史[\s].*$').click([0.5,0.5],1)
poco("android.widget.Button").click()
poco(text="请输入疾病名称").click()
sleep(1.0)
text('测试病史')
sleep(1.0)
poco(textMatches='开始时间[\s].*$').click([0.5,0.5],1)
poco(name="android.widget.SeekBar")[0].swipe([0.5,3.5*swipetime],[0.5,swipetime],duration=0.5)
poco(text='确定').click([0.5,0.5],1)
poco(textMatches='结束时间[\s].*$').click([0.5,0.5],1)
poco(text='确定').click([0.5,0.5],1)
poco(textMatches='目前持续[\s].*$').click([0.5,0.5],1)
poco(name="android.widget.SeekBar")[0].swipe([0.5,2.5*swipetime],[0.5,swipetime],duration=0.5)
poco(text='确定').click([0.5,0.5],1)
poco(text='请输入治疗详情').click([0.5,0.5],1)
text('测试详情')
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View").child("android.view.View")[5].child("android.view.View").child("android.view.View").child("android.view.View").click()
sleep(1.0)
poco(text='从相册选择').click()
sleep(1.0)
poco("显示根目录").click()
poco("android.widget.FrameLayout").offspring("com.android.documentsui:id/roots_list").child("android.widget.LinearLayout")[3].offspring("android:id/icon")[0].click([0.5,0.5],1)
touch(Template(r"tpl1586934822099.png", record_pos=(0.239, 0.228), resolution=(720, 1520)))
touch(Template(r"tpl1586934831756.png", record_pos=(0.132, 0.911), resolution=(720, 1520)))
poco(text='完成').click([0.5,0.5],1)

'''
以下为编辑病史
'''
poco(textMatches='测试病史[\s].*$').click([0.5,0.5],1)
poco(text='编辑').click([0.5,0.5],1)
poco(text='测试病史').click([0.5,0.5],1)
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View").child("android.view.View")[0].child("android.view.View").click([0.5,0.5],1)
text('开心病史')
poco(textMatches='开始时间[\s].*$').click([0.5,0.5],1)
poco(name="android.widget.SeekBar")[0].swipe([0.5,2.5*swipetime],[0.5,swipetime],duration=0.5)
poco(text='确定').click([0.5,0.5],1)
poco(textMatches='目前持续[\s].*$').click([0.5,0.5],1)
poco(name="android.widget.SeekBar")[0].swipe([0.5,-1*swipetime],[0.5,3.5*swipetime],duration=0.5)
poco(text='确定').click([0.5,0.5],1)
poco(textMatches='测试详情[\s].*$').click()
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View").child("android.view.View")[4].child("android.view.View").click([0.5,0.5],1)
text('猜猜看呀')
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View").child("android.view.View")[5].child("android.view.View").child("android.view.View").child("android.view.View")[0].child("android.view.View").click([0.5,0.5],1)
poco(text='完成').click([0.5,0.5],1)
keyevent("BACK")
assert_equal(poco(textMatches='开心病史[\s].*$').exists(), True, "开心病史存在")

'''
以下为新建圈子
'''
poco(text='圈子').click([0.5,0.5],1)
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[0].child("android.view.View").child("android.view.View")[1].click()
sleep(1.0)
poco(text='新建圈子').click([0.5,0.5],1)
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View").child("android.view.View").child("android.view.View")[0].child("android.view.View")[0].click([0.5,0.5],1)
poco(text='从相册选择').click([0.5,0.5],1)
poco("显示根目录").click([0.5,0.5],1)
poco("android.widget.FrameLayout").offspring("com.android.documentsui:id/roots_list").child("android.widget.LinearLayout")[3].offspring("android:id/icon")[0].click([0.5,0.5],1)
touch(Template(r"tpl1586934822099.png", record_pos=(0.239, 0.228), resolution=(720, 1520)))
touch(Template(r"tpl1586934831756.png", record_pos=(0.132, 0.911), resolution=(720, 1520)))
poco(text='输入圈子名称').click([0.5,0.5],1)
text('ccc圈子')
poco(text='加入方式').click([0.5,0.5],1)
poco(text='确定').click([0.5,0.5],1)
poco(text="输入简介信息").click()
sleep(1.0)
text('吃喝玩乐')
keyevent("BACK")
poco(text='保存').click([0.5,0.5],1)
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[0].child("android.view.View").child("android.view.View")[0].click([0.5,0.5],1)
poco(text='我的圈子').click([0.5,0.5],1)
assert_equal(poco(textMatches="ccc圈子[\s].*[\s].*[\s].*[\s].*$").exists(), True, "ccc圈子存在")
keyevent("BACK")
'''
以下为加入圈子、发表话题、退出圈子
'''
keyevent("BACK")
poco(text='首页').click([0.5,0.5],1)
poco(text='圈子').click([0.5,0.5],1)
poco(textMatches='保护动物呢[\s].*[\s].*$').click()
sleep(1.0)
poco(text='加入圈子').click([0.5,0.5],1)
poco(text='发表话题').click([0.5,0.5],1)
poco(text='分享此刻的想法').click([0.5,0.5],1)
text('开开心心')
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View").child("android.view.View")[1].child("android.view.View").child("android.view.View").child("android.view.View").click([0.5,0.5],1)
poco(text='从相册选择').click([0.5,0.5],1)
poco("显示根目录").click([0.5,0.5],1)
poco("android.widget.FrameLayout").offspring("com.android.documentsui:id/roots_list").child("android.widget.LinearLayout")[3].offspring("android:id/icon")[0].click([0.5,0.5],1)
touch(Template(r"tpl1586934822099.png", record_pos=(0.239, 0.228), resolution=(720, 1520)))
touch(Template(r"tpl1586934831756.png", record_pos=(0.132, 0.911), resolution=(720, 1520)))
poco(text='发表').click([0.5,0.5],1)
keyevent("BACK")
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[0].child("android.view.View").child("android.view.View")[0].click()
poco(text='我的话题').click([0.5,0.5],1)
assert_equal(poco(textMatches="TST[\s].*[\s]开开心心[\s].*$").exists(), True, "开开心心存在")
keyevent("BACK")
poco(text='我的圈子').click()
poco(textMatches='已加入[\s].*$').click()
poco(textMatches='保护动物呢[\s].*[\s].*[\s].*$').click()
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[0].child("android.widget.Button")[1].click()
poco(text='退出圈子').click()
poco(text='确认').click()
poco(wait(poco("android.widget.Button").click()))

'''
以下为首页添加我的治疗
'''
touch(Template(r"tpl1587871816470.png", record_pos=(-0.317, -0.74), resolution=(720, 1520)))
sleep(1.0)
poco(name='android.widget.Button')[1].click()
poco(text='低促性腺激素性性腺功能减退').click()
poco(text='低促性性腺功能减退-初诊-女').click()
poco(text='下一步').click()
poco(textMatches="就诊时间[\s].*$").click([0.5,0.5],1)
poco(text='确定').click([0.5,0.5],1)
poco(textMatches="医院名称[\s].*$").click([0.5,0.5],1)
poco(text='搜索').click([0.5,0.5],1)
text('肥西县人民医院')
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[2].click([0.5,0.5],1)
poco(text='肥西县人民医院',name='android.view.View').click()
sleep(1.0)
poco(textMatches="所属科室[\s].*$").click([0.5,0.5],1)
poco(text='确定').click([0.5,0.5],1)
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View").child("android.view.View")[6].child("android.view.View")[1].click([0.5,0.5],1)
poco(textMatches="医生自动化[\s].*$").click([0.5,0.5],1)
poco(text='请输入').click([0.5,0.5],1)
text('自动测试')
keyevent("BACK")
sleep(1.0)
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[2].click()
assert_equal(poco(textMatches='低促性腺激素性性腺功能减退[\s].*[\s].*[\s].*$').exists(),True,'判断低促性腺激素性性腺功能减退存在')
poco(name='android.widget.Button')[1].click()
poco(text='多囊卵巢综合征').click()
poco(text='PCOS普通治疗计划').click()
poco(text='下一步').click()
poco(textMatches="就诊时间[\s].*$").click([0.5,0.5],1)
poco(name="android.widget.SeekBar")[2].swipe([0.5,1.5*swipetime],[0.5,-4.5*swipetime],duration=1)
poco(text='确定').click([0.5,0.5],1)
poco(textMatches="医院名称[\s].*$").click([0.5,0.5],1)
poco(text='搜索').click([0.5,0.5],1)
text('肥西县人民医院')
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[2].click([0.5,0.5],1)
poco(text='肥西县人民医院',name='android.view.View').click()
sleep(1.0)
poco(textMatches="所属科室[\s].*$").click([0.5,0.5],1)
poco(text='确定').click([0.5,0.5],1)
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View").child("android.view.View")[6].child("android.view.View")[1].click([0.5,0.5],1)
poco(textMatches="医生自动化[\s].*$").click([0.5,0.5],1)
poco(text='请输入').click([0.5,0.5],1)
text('自动测试')
keyevent("BACK")
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[2].click()
assert_equal(poco(textMatches='多囊卵巢综合征[\s].*[\s].*[\s].*$').exists(),True,'判断多囊卵巢综合征存在')
sleep(1.0)
swipe(Template(r"tpl1587870019460.png", record_pos=(0.285, -0.625), resolution=(720, 1520)), vector=[-0.4417, 0.0256])
poco(text='删除').click()
poco(text='确认').click()
swipe(Template(r"tpl1587870058387.png", record_pos=(0.276, -0.265), resolution=(720, 1520)), vector=[-0.4617, 0.0251])
poco(text='删除').click()
poco(text='确认').click()
assert_equal(poco(text='暂无内容').exists(),True,'判断我的治疗中的病历是否删除成功')
keyevent("BACK")

'''
以下为首页进行量表测量
'''
poco(text='我的量表').click()
poco(text="最近一周抑郁水平测试CES-D").click([0.5,0.5],1)
poco(text="开始测量").click([0.5,0.5],1)

i = 1
while(i < 21):
    poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[4].child("android.view.View").child("android.view.View")[1].child("android.widget.RadioButton")[1].click([0.5,0.5],1)
    i = i + 1

poco(text='提交').click([0.5,0.5],1)

assert_equal(poco(textMatches="20分[\s]16～24分是中等水平的抑郁。这个测验不是用来诊断抑郁症的，它的目的是告诉你，你现在的抑郁水平。").exists(), True, "我的量表结果存在")
keyevent("BACK")
poco(text='历史').click([0.5,0.5],1)
poco(textMatches="最近一周抑郁水平测试CES-D[\s].*$").click([0.5,0.5],1)
poco(text='查看详情').click([0.5,0.5],1)
assert_equal(poco(textMatches="20分[\s]16～24分是中等水平的抑郁。这个测验不是用来诊断抑郁症的，它的目的是告诉你，你现在的抑郁水平。").exists(), True, "我的量表结果存在")
keyevent("BACK")
poco(text='重新测试').click([0.5,0.5],1)
poco(text='开始测量').click([0.5,0.5],1)
i = 1
while(i < 21):
    poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[4].child("android.view.View").child("android.view.View")[1].child("android.widget.RadioButton")[1].click([0.5,0.5],1)
    i = i + 1

poco(text='提交').click([0.5,0.5],1)
assert_equal(poco(textMatches="20分[\s]16～24分是中等水平的抑郁。这个测验不是用来诊断抑郁症的，它的目的是告诉你，你现在的抑郁水平。").exists(), True, "我的量表结果存在")
keyevent("BACK")
poco(text='查看详情').click([0.5,0.5],1)
assert_equal(poco(textMatches="20分[\s]16～24分是中等水平的抑郁。这个测验不是用来诊断抑郁症的，它的目的是告诉你，你现在的抑郁水平。").exists(), True, "我的量表结果存在")
keyevent("BACK")
keyevent("BACK")
keyevent("BACK")
keyevent("BACK")
'''
以下为首页添加医生
'''
touch(Template(r"tpl1587870394692.png", record_pos=(-0.003, 0.115), resolution=(720, 1520)))
sleep(1.0)
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[0].child("android.view.View")[1].click()
sleep(1.0)
poco(textMatches="未确认[\s].*$").click()
sleep(1.0)
poco(text='医生的姓名/手机号').click()
text("prod升")
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[2].click([0.5,0.5],1)
poco(textMatches='prod升[\s].*$').click()
poco(text='确认添加').click([0.5,0.5],1)
keyevent("BACK")
keyevent("BACK")
poco(textMatches="未确认[\s].*$").click([0.5,0.5],1)
assert_equal(poco(textMatches="肥西县人民医院[\s]prod升[\s]肥西县人民医院 儿内科").exists(), True, "prod升存在")
keyevent("BACK")
poco(text='我的').click()
poco(text='我的设置').click([0.5,0.5],1)
poco(text='退出登录').click([0.5,0.5],1)
poco(text='退出登录').click([0.5,0.5],1)
poco(text='TST').click([0.5,0.5],1)
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View")[2].child("android.view.View").child("android.view.View").child("android.view.View")[0].click([0.5,0.5],1)
poco(text='用户名').click([0.5,0.5],1)
text('TESTPROD')
poco(text='密码').click([0.5,0.5],1)
text('atyun728')
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View")[3].click([0.5,0.5],1)
poco(text='登录').click([0.5,0.5],1)
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[0].child("android.view.View").child("android.view.View")[1].click([0.5,0.5],1)
poco(textMatches="病人消息[\s].*$").click([0.5,0.5],1)
poco(text="拒绝").click([0.5,0.5],1)
keyevent("BACK")
keyevent("BACK")
poco(text='我的').click([0.5,0.5],1)
poco(text='我的设置').click([0.5,0.5],1)
poco(text='退出登录').click([0.5,0.5],1)
poco(text='退出登录').click([0.5,0.5],1)
poco(text='TESTPROD').click([0.5,0.5],1)
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View")[2].child("android.view.View").child("android.view.View").child("android.view.View")[0].click([0.5,0.5],1)
poco(text='用户名').click([0.5,0.5],1)
text('TST')
poco(text='密码').click([0.5,0.5],1)
text('atyun728')
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View")[3].click([0.5,0.5],1)
poco(text='登录').click([0.5,0.5],1)
poco(text='我的').click([0.5,0.5],1)
poco(text='我的医生').click([0.5,0.5],1)
poco(textMatches="未确认[\s].*$").click([0.5,0.5],1)
assert_equal(poco(name='android.widget.ImageView').exists(), True, "暂无内容存在")
keyevent("BACK")
'''
以下是联系医生
'''
poco(text='首页').click()
poco(text="医生自动化").click()
sleep(1.0)
poco(text='联系TA').click([0.5,0.5],1)
poco(name="android.widget.EditText").click([0.5,0.5],1)
text("预发送信息")
poco(text="发送").click([0.5,0.5],1)
poco(name="android.widget.EditText").click([0.5,0.5],1)
sendtime = datetime.datetime.now()
sendmessage = sendtime.strftime('%Y-%m-%d-%H-%M-%S')
text(sendmessage)
poco(text="发送").click([0.5,0.5],1)
assert_equal(poco(text=sendmessage).exists(), True, "病人端联系医生消息发送正常。")
sleep(1.0)
keyevent("BACK")
sleep(1.0)
keyevent("BACK")
sleep(1.0)
poco(text="我的").click([0.5,0.5],1)
poco(text="我的设置").click([0.5,0.5],1)
poco(text="退出登录").click([0.5,0.5],1)
poco(text="退出登录").click([0.5,0.5],1)
poco(text="TST").click([0.5,0.5],1)
sleep(1.0)
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View")[2].child("android.view.View").child("android.view.View").child("android.view.View")[0].click([0.5,0.5],1)
text("prod")
poco(text="密码").click([0.5,0.5],1)
text("atyun728")
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View")[3].click([0.5,0.5],1)
poco(text="登录").click([0.5,0.5],1)
poco(text="我的").wait_for_appearance(timeout=20)
poco(name="android.view.View")[3].click([0.5,0.5],1)
poco(textMatches="对话[\s].*$").click([0.5,0.5],1)
poco(text="TST").click([0.5,0.5],1)
assert_equal(poco(text=sendmessage).exists(), True, "医生端消息接收正常。")
keyevent("BACK")
keyevent("BACK")
poco(text="我的").click([0.5,0.5],1)
poco(text="我的设置").click([0.5,0.5],1)
poco(text="退出登录").click([0.5,0.5],1)
poco(text="退出登录").click([0.5,0.5],1)
poco(text="prod").click([0.5,0.5],1)
sleep(1.0)
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View")[2].child("android.view.View").child("android.view.View").child("android.view.View")[0].click([0.5,0.5],1)
text("TST")
poco(text="密码").click([0.5,0.5],1)
text("atyun728")
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[1].child("android.view.View")[3].click([0.5,0.5],1)
poco(text="登录").click([0.5,0.5],1)
'''
以下为首页查看资料
'''
poco("android:id/content").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View").child("android.view.View")[0].child("android.view.View").child("android.view.View")[0].click()
assert_equal(poco(textMatches='性别[\s]女[\s]手机号[\s].*[\s].*$').exists(),True,"判断资料显示是否正常")
keyevent("BACK")
